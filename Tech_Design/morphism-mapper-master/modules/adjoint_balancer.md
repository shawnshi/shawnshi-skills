---
module: adjoint_balancer
version: 4
name: 伴随可行性平衡器
description: 在理想脑洞与现实约束之间寻找最优伴随解
---

## Mathematical Foundation

**伴随函子 (Adjoint Functors)**：
函子 L: C → D 和 R: D → C 称为伴随对 (L ⊣ R)，如果存在自然同构：
Hom_D(L(X), Y) ≅ Hom_C(X, R(Y))

**商业映射**：
- L = 左伴随 (Free Functor) = 释放想象力，追求 Domain B 的极致可能
- R = 右伴随 (Forgetful Functor) = 回归现实，考虑 Domain A 的约束限制
- 伴随关系 = 每一个"脑洞"都有对应的"可行版本"，每一个"现实方案"都能追溯其"理想原型"

**Unit η: X → R(L(X))**：
从现实出发，先释放想象，再回到现实——找到那个"神髓保留最完整且成本最低"的切入点

## Trigger

### 强制执行
每次生成【推演提案】前自动执行

### 手动触发
命令：`/morphism-balance`

## Logic

### Step 1: 左伴随 L - 自由构造
暂时忽略所有约束，追求 Domain B 定理的极致应用：
- 如果资源无限，方案会是什么？
- 如果不考虑成本，最理想的状态是什么？
- Domain B 的理论上限在哪里？

### Step 2: 右伴随 R - 约束回归
将理想方案映射回 Domain A，考虑现实约束：
- 人力/技术/资金限制
- 时间窗口/竞争压力
- 合规/文化/组织惯性

### Step 3: 寻找 Unit η
找到最优的"伴随解"：
- 保留 B 领域定理的"神髓"（核心洞察）
- 以 A 领域最低成本实现
- 可作为"杠杆点"撬动更大变化

### Step 4: 三档方案生成
为每个推演提案生成三个版本：
- **理想版 (L)**：不受约束的极致脑洞
- **可行版 (η)**：伴随解，最优平衡点 ⭐ **推荐**
- **保守版 (R)**：仅考虑约束的保底方案

### Step 5: Kan Extension 触发判定（可选）

当伴随解 η 仍无法满足核心约束时，触发 Kan Extension 作为**近似解**生成机制。

#### 触发条件

判定场景：【核心定理无法落地】

具体表现：
1. **资源缺口过大**：即使是最小化后的 η 方案，所需资源仍超出可承受范围（如需要 100 人月但只有 5 人月）
2. **时间窗口关闭**：η 方案的最短实施周期超过机会窗口（如需要 6 个月但市场机会只有 1 个月）
3. **结构性冲突**：Domain B 的核心定理与 Domain A 的硬性约束存在不可调和矛盾（如需要"完全开放"但合规要求"完全封闭"）
4. **技术不可行**：η 方案依赖的关键技术在 Domain A 中不存在且无法引入

当以上任一条件满足时，判定为"核心定理无法落地"，需调用 Kan Extension 模块。

#### Kan Extension 调用接口

```
/morphism-kan-extension [提案编号] [触发原因]
```

触发原因编码：
- `RESOURCE`：资源缺口
- `TIME`：时间窗口
- `STRUCTURE`：结构性冲突
- `TECH`：技术不可行

#### 【伴随解 η】vs【近似解】标注区分

| 维度 | 【伴随解 η】(Adjoint Balancer 输出) | 【近似解】(Kan Extension 输出) |
|------|-------------------------------------|-------------------------------|
| **定义** | 在 L/R 伴随对中找到的最优平衡点 | 当 η 不可行时，通过扩展域保持结构的近似方案 |
| **数学基础** | 伴随函子 L ⊣ R 的 Unit η | 左/右 Kan Extension 的 Universal Property |
| **核心特征** | 保留 B 领域定理的"神髓"，在 A 领域最低成本实现 | 放宽某些约束，在扩展后的域中保持核心结构 |
| **适用场景** | 约束可接受范围内的最优解 | 约束过于刚性，需要"绕过"或"重构"约束本身 |
| **输出标注** | 方案名后缀为 `-η` | 方案名后缀为 `-κ` (kappa) |
| **风险提示** | 中等风险，可控 | 较高风险，需验证近似有效性 |

#### 调用后的输出格式调整

当触发 Kan Extension 后，三档方案变为：
- **理想版 (L)**：不受约束的极致脑洞
- **伴随解 (η)**：理论最优平衡点（标注不可行原因）
- **近似解 (κ)**：Kan Extension 生成的可行方案 ⭐ **推荐**
- **保守版 (R)**：仅考虑约束的保底方案

Kan Extension 输出需额外包含：
- **放宽的约束**：哪些约束被重构或绕过
- **结构保持度**：核心定理的保持百分比（如"保留了 70% 的 Yoneda 结构"）
- **近似风险**：近似带来的潜在偏差及监控方法

## Input/Output

### 输入
- 来自 Phase 4 的推演提案（1-3个）
- Domain A 的资源/约束条件
- 风险偏好（激进/平衡/保守）

### 输出格式

```markdown
### 【伴随解分析】

#### 提案一：[标题]

**左伴随 L (理想版)**：
- 方案：...
- 预期效果：...
- 所需资源：【无限/极大】
- 风险：理论最优，但不可行

**右伴随 R (保守版)**：
- 方案：...
- 预期效果：...
- 所需资源：【可控】
- 风险：过于保守，错失机会

**伴随解 η (最优平衡)** ⭐ 推荐：
- 方案：...
- 核心洞察保留：保留了 [Domain B 定理] 的 [核心机制]
- 成本优化：通过 [具体方式] 将投入降低 [X]%
- 实施路径：...
- 风险评级：中等，可控
- 杠杆效应：此方案成功后可撬动 [更大机会]

#### 可行性矩阵

| 提案 | 结构完整性 | 实施成本 | 时间周期 | 风险等级 | 综合评分 |
|------|------------|----------|----------|----------|----------|
| 1-L | ⭐⭐⭐⭐⭐ | ⭐ | ⭐ | 🔴高 | - |
| 1-η | ⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐ | 🟡中 | **9.2** |
| 1-R | ⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | 🟢低 | 6.5 |
| 2-L | ... | ... | ... | ... | ... |
| ... | ... | ... | ... | ... | ... |

#### 综合建议

**最优落地项**：提案 [X] 的伴随解 η

选择理由：
1. 最大程度保留了 [Domain B] 的理论价值
2. 在现有资源约束下可执行
3. 成功后可为进一步演化奠定基础

**执行优先级**：
1. [第一优先级提案]
2. [第二优先级提案]
3. [第三优先级提案]

**关键成功因素**：
- ...
- ...

**退出条件**（何时应停止执行）：
- ...
- ...
```

## Integration

挂载点：Phase 4 (Pull-back & Synthesis) 之后，最终输出之前
作用：确保提案的可行性，防止脑洞过大无法落地
强制执行：是
